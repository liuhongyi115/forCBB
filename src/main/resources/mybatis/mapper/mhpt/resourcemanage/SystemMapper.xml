<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.taiji.cloudmp.mhpt.modules.resourcemanage.repository.SystemRepository">
	<resultMap id="System" type="com.taiji.cloudmp.mhpt.modules.resourcemanage.domain.System">
		<id column="id" property="id"></id>
        <result column="servicestandard_id" property="servicestandardId"></result>
        <result column="service_name" property="serviceName"></result>
        <result column="service_order" property="serviceOrder"></result>
        <result column="service_explain" property="serviceExplain"></result>
        <result column="resource_ctime" property="resourceCtime"></result>
        <result column="resource_utime" property="resourceUtime"></result>
        <result column="cloud_vendor" property="cloudVendor"></result>
        <result column="cloud_services_kind" property="cloudServicesKind"></result>
        <result column="type" property="type"></result>
        <result column="corr_version" property="corrVersion"></result>
        <result column="service_kind" property="serviceKind"></result>
        <result column="host_resource" property="hostResource"></result>
	</resultMap>
 	
 	<sql id="columns" >
       id,servicestandard_id,service_name,service_order,service_explain,resource_ctime,resource_utime,cloud_vendor,cloud_services_kind,type,corr_version,
        service_kind,host_resource
    </sql>
    
    <sql id="dynamicWhere">
		<where>
			<if test="id != null">
				and id = #{id}
        	</if>
            <if test="cloudVendor!='' and cloudVendor!= null ">
                and cloud_vendor like CONCAT(CONCAT('%', #{cloudVendor}),'%')
            </if>
            <if test="serviceExplain!='' and serviceExplain!= null ">
                and service_explain like CONCAT(CONCAT('%', #{serviceExplain}),'%')
            </if>
            <if test="type!='' and type!= null ">
                and type = #{type}
            </if>
            <if test="corrVersion!='' and corrVersion!= null ">
                and corr_version = #{corrVersion}
            </if>
        </where>
	</sql>
    
	<insert id="add" parameterType="com.taiji.cloudmp.mhpt.modules.resourcemanage.domain.System">
  		 insert into t_mhpt_resource_initialize (<include refid="columns"/>) values
        (#{id},#{servicestandardId},#{serviceName},#{serviceOrder},#{serviceExplain},#{resourceCtime},#{resourceUtime},#{cloudVendor},
         #{cloudServicesKind},#{type},#{corrVersion},#{serviceKind},#{hostResource})
	</insert>
 	
 	<update id="update" parameterType="com.taiji.cloudmp.mhpt.modules.resourcemanage.domain.System">
		 update t_mhpt_resource_initialize set
          servicestandard_id=#{servicestandardId},service_name=#{serviceName},service_order=#{serviceOrder},service_explain=#{serviceExplain},
          resource_ctime=#{resourceCtime},resource_utime=#{resourceUtime},cloud_vendor=#{cloudVendor},cloud_services_kind=#{cloudServicesKind},
          type=#{type},corr_version=#{corrVersion},service_kind=#{serviceKind},host_resource=#{hostResource}
         where id = #{id}
	</update>
 	
	<delete id="delete" parameterType="java.lang.String">
		delete from t_mhpt_resource_initialize 
		where id = #{id}
	</delete>
 
	<select id="findAll" parameterType="com.taiji.cloudmp.mhpt.modules.resourcemanage.domain.System" resultMap="System">
		select <include refid="columns" />
		from t_mhpt_resource_initialize
		<include refid="dynamicWhere" />
		<if test="pager.DBPageCondition != null and pager.DBPageCondition != ''">
			${pager.DBPageCondition}
		</if>
	</select>
 
	<select id="findById" parameterType="java.lang.String" resultMap="System">
		select <include refid="columns" />
		from t_mhpt_resource_initialize
		where id = #{id}
	</select>
 	
 	<select id="findTotalCount" resultType="java.lang.Long" >
		select count(1)
		FROM t_mhpt_resource_initialize
		<include refid="dynamicWhere" />
	</select>
</mapper>